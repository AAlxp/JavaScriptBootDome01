<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta http-equiv="Content-Type" content="text/html"; charset="UTF-8">
    <title>影视直播厅</title>
</head>
<body>
<h1 align="center">欢迎进入电影网站首页</h1>
<div sec:authorize="isAuthenticated()"><!--  判断用户是否登录  -->
    <h2 align="center">
        您的用户名为
        <span sec:authentication="name" style="color: blue"></span>
        您的权限为
        <span sec:authentication="principal.authorities" style="color: blue"></span>
        ,你可以看一下电影
    </h2>
</div>
<div>
    <form th:action="@{/mylogout}" method="post">
        <input th:type="submit" th:value="注销"/>
    </form>
    <form th:action="@{/toupdateUser}" method="post">
        <input th:type="submit" th:value="修改用户名"/>
    </form>
</div>
<hr/>
<div sec:authorize="hasRole('common')">
    <h3>普通电影</h3>
    <ul>
        <li><a th:href="@{/detail/common/1}">莫斯科行动</a></li>
        <li><a th:href="@{/detail/common/2}">坚如磐石 </a></li>
    </ul>
</div>

<div sec:authorize="hasAnyAuthority('ROLE_vip')">
    <h3>VIP电影</h3>
    <ul>
        <li><a th:href="@{/detail/vip/1}">志愿军：雄兵出击</a></li>
        <li><a th:href="@{/detail/vip/2}">前任4：英年早婚</a></li>
    </ul>

</div>
</body>
</html>
